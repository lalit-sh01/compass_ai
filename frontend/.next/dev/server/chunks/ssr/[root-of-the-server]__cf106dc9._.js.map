{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///Users/lalitshewani/projects/claude/ai_pm_roadmap/roadmap-viewer/frontend/components/dashboard/ImportRoadmap.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/components/dashboard/ImportRoadmap.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/dashboard/ImportRoadmap.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAA0S,GACvU,wEACA","ignoreList":[0]}},
    {"offset": {"line": 36, "column": 0}, "map": {"version":3,"sources":["file:///Users/lalitshewani/projects/claude/ai_pm_roadmap/roadmap-viewer/frontend/components/dashboard/ImportRoadmap.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/components/dashboard/ImportRoadmap.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/dashboard/ImportRoadmap.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAsR,GACnT,oDACA","ignoreList":[0]}},
    {"offset": {"line": 50, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 58, "column": 0}, "map": {"version":3,"sources":["file:///Users/lalitshewani/projects/claude/ai_pm_roadmap/roadmap-viewer/frontend/components/dashboard/RoadmapGrid.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/components/dashboard/RoadmapGrid.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/dashboard/RoadmapGrid.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAwS,GACrU,sEACA","ignoreList":[0]}},
    {"offset": {"line": 72, "column": 0}, "map": {"version":3,"sources":["file:///Users/lalitshewani/projects/claude/ai_pm_roadmap/roadmap-viewer/frontend/components/dashboard/RoadmapGrid.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/components/dashboard/RoadmapGrid.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/dashboard/RoadmapGrid.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAoR,GACjT,kDACA","ignoreList":[0]}},
    {"offset": {"line": 86, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 94, "column": 0}, "map": {"version":3,"sources":["file:///Users/lalitshewani/projects/claude/ai_pm_roadmap/roadmap-viewer/frontend/lib/api-client-server.ts"],"sourcesContent":["import { auth } from '@clerk/nextjs/server';\n\nconst API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:8000';\n\ntype FetchOptions = RequestInit & {\n    skipAuth?: boolean;\n};\n\nexport const serverApiClient = {\n    fetch: async (endpoint: string, options: FetchOptions = {}) => {\n        const { skipAuth = false, ...fetchOptions } = options;\n        const headers: HeadersInit = {\n            'Content-Type': 'application/json',\n            ...fetchOptions.headers,\n        };\n\n        if (!skipAuth) {\n            const { getToken } = await auth();\n            const token = await getToken();\n            if (token) {\n                (headers as any)['Authorization'] = `Bearer ${token}`;\n            }\n        }\n\n        const response = await fetch(`${API_URL}${endpoint}`, {\n            ...fetchOptions,\n            headers,\n            cache: 'no-store', // Ensure fresh data\n        });\n\n        if (!response.ok) {\n            const error = await response.json().catch(() => ({}));\n            console.error('[API Client] Request failed:', { status: response.status, url: endpoint, error });\n\n            let errorMessage = error.message || `API request failed: ${response.status}`;\n\n            if (error.detail) {\n                if (typeof error.detail === 'string') {\n                    errorMessage = error.detail;\n                } else if (Array.isArray(error.detail)) {\n                    // Handle Pydantic validation errors\n                    errorMessage = error.detail\n                        .map((e: any) => `${e.loc?.join('.')} - ${e.msg}`)\n                        .join('\\n');\n                } else if (typeof error.detail === 'object') {\n                    errorMessage = JSON.stringify(error.detail, null, 2);\n                }\n            }\n\n            throw new Error(errorMessage);\n        }\n\n        // Handle 204 No Content\n        if (response.status === 204) {\n            return null;\n        }\n\n        return response.json();\n    },\n\n    get: async <T>(endpoint: string, options: FetchOptions = {}): Promise<T> => {\n        return serverApiClient.fetch(endpoint, { ...options, method: 'GET' });\n    },\n\n    post: async <T>(endpoint: string, body: any, options: FetchOptions = {}): Promise<T> => {\n        return serverApiClient.fetch(endpoint, {\n            ...options,\n            method: 'POST',\n            body: JSON.stringify(body),\n        });\n    },\n\n    patch: async <T>(endpoint: string, body: any, options: FetchOptions = {}): Promise<T> => {\n        return serverApiClient.fetch(endpoint, {\n            ...options,\n            method: 'PATCH',\n            body: JSON.stringify(body),\n        });\n    },\n\n    delete: async <T>(endpoint: string, options: FetchOptions = {}): Promise<T> => {\n        return serverApiClient.fetch(endpoint, { ...options, method: 'DELETE' });\n    },\n};\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,UAAU,QAAQ,GAAG,CAAC,mBAAmB,IAAI;AAM5C,MAAM,kBAAkB;IAC3B,OAAO,OAAO,UAAkB,UAAwB,CAAC,CAAC;QACtD,MAAM,EAAE,WAAW,KAAK,EAAE,GAAG,cAAc,GAAG;QAC9C,MAAM,UAAuB;YACzB,gBAAgB;YAChB,GAAG,aAAa,OAAO;QAC3B;QAEA,IAAI,CAAC,UAAU;YACX,MAAM,EAAE,QAAQ,EAAE,GAAG,MAAM,IAAA,2LAAI;YAC/B,MAAM,QAAQ,MAAM;YACpB,IAAI,OAAO;gBACN,OAAe,CAAC,gBAAgB,GAAG,CAAC,OAAO,EAAE,OAAO;YACzD;QACJ;QAEA,MAAM,WAAW,MAAM,MAAM,GAAG,UAAU,UAAU,EAAE;YAClD,GAAG,YAAY;YACf;YACA,OAAO;QACX;QAEA,IAAI,CAAC,SAAS,EAAE,EAAE;YACd,MAAM,QAAQ,MAAM,SAAS,IAAI,GAAG,KAAK,CAAC,IAAM,CAAC,CAAC,CAAC;YACnD,QAAQ,KAAK,CAAC,gCAAgC;gBAAE,QAAQ,SAAS,MAAM;gBAAE,KAAK;gBAAU;YAAM;YAE9F,IAAI,eAAe,MAAM,OAAO,IAAI,CAAC,oBAAoB,EAAE,SAAS,MAAM,EAAE;YAE5E,IAAI,MAAM,MAAM,EAAE;gBACd,IAAI,OAAO,MAAM,MAAM,KAAK,UAAU;oBAClC,eAAe,MAAM,MAAM;gBAC/B,OAAO,IAAI,MAAM,OAAO,CAAC,MAAM,MAAM,GAAG;oBACpC,oCAAoC;oBACpC,eAAe,MAAM,MAAM,CACtB,GAAG,CAAC,CAAC,IAAW,GAAG,EAAE,GAAG,EAAE,KAAK,KAAK,GAAG,EAAE,EAAE,GAAG,EAAE,EAChD,IAAI,CAAC;gBACd,OAAO,IAAI,OAAO,MAAM,MAAM,KAAK,UAAU;oBACzC,eAAe,KAAK,SAAS,CAAC,MAAM,MAAM,EAAE,MAAM;gBACtD;YACJ;YAEA,MAAM,IAAI,MAAM;QACpB;QAEA,wBAAwB;QACxB,IAAI,SAAS,MAAM,KAAK,KAAK;YACzB,OAAO;QACX;QAEA,OAAO,SAAS,IAAI;IACxB;IAEA,KAAK,OAAU,UAAkB,UAAwB,CAAC,CAAC;QACvD,OAAO,gBAAgB,KAAK,CAAC,UAAU;YAAE,GAAG,OAAO;YAAE,QAAQ;QAAM;IACvE;IAEA,MAAM,OAAU,UAAkB,MAAW,UAAwB,CAAC,CAAC;QACnE,OAAO,gBAAgB,KAAK,CAAC,UAAU;YACnC,GAAG,OAAO;YACV,QAAQ;YACR,MAAM,KAAK,SAAS,CAAC;QACzB;IACJ;IAEA,OAAO,OAAU,UAAkB,MAAW,UAAwB,CAAC,CAAC;QACpE,OAAO,gBAAgB,KAAK,CAAC,UAAU;YACnC,GAAG,OAAO;YACV,QAAQ;YACR,MAAM,KAAK,SAAS,CAAC;QACzB;IACJ;IAEA,QAAQ,OAAU,UAAkB,UAAwB,CAAC,CAAC;QAC1D,OAAO,gBAAgB,KAAK,CAAC,UAAU;YAAE,GAAG,OAAO;YAAE,QAAQ;QAAS;IAC1E;AACJ"}},
    {"offset": {"line": 183, "column": 0}, "map": {"version":3,"sources":["file:///Users/lalitshewani/projects/claude/ai_pm_roadmap/roadmap-viewer/frontend/lib/db/users.ts"],"sourcesContent":["import { auth, currentUser } from '@clerk/nextjs/server'\nimport { serverApiClient } from '@/lib/api-client-server'\n\nexport interface User {\n  id: string\n  clerk_user_id: string\n  email: string\n  full_name: string | null\n  created_at: string\n  updated_at: string\n}\n\nexport interface CreateUserInput {\n  clerk_user_id: string\n  email: string\n  full_name?: string\n}\n\n/**\n * Gets the current user from the database via Python backend\n * Auto-syncs user record if it doesn't exist\n */\nexport async function getCurrentUser(): Promise<User | null> {\n  const { userId } = await auth()\n\n  if (!userId) {\n    return null\n  }\n\n  try {\n    // Try to get existing user from backend\n    return await serverApiClient.get<User>('/api/users/me')\n  } catch (error) {\n    // If user not found (404), try to sync/create\n    // We can't easily distinguish 404 from other errors with current client, \n    // but let's assume if it fails we try to sync if we have clerk data\n    console.log(`[getCurrentUser] User lookup failed, attempting sync. Error: ${error}`)\n\n    const clerkUser = await currentUser()\n\n    if (!clerkUser) {\n      return null\n    }\n\n    // Get email from Clerk user\n    const email = clerkUser.emailAddresses?.[0]?.emailAddress || `${userId}@clerk.user`\n    const fullName = `${clerkUser.firstName || ''} ${clerkUser.lastName || ''}`.trim() || undefined\n\n    console.log(`[AUTO-CREATE USER] Syncing user record for Clerk ID: ${userId}, Email: ${email}`)\n\n    try {\n      // Sync user (create or update)\n      const user = await serverApiClient.post<User>('/api/users/sync', {\n        email,\n        full_name: fullName\n      })\n\n      console.log(`[AUTO-CREATE USER] User synced successfully: ${user.id}`)\n      return user\n    } catch (syncError) {\n      console.error(`[getCurrentUser] Failed to sync user: ${syncError}`)\n      return null\n    }\n  }\n}\n\n// Deprecated/Unused functions kept for compatibility if needed, \n// but they should ideally be removed or updated to use backend if possible.\n// For now, we stub them or throw error as we want to force usage of backend.\n\nexport async function createUser(input: CreateUserInput): Promise<User> {\n  // This was used by webhooks. For now, we can't easily call backend from webhook \n  // without a token unless we implement API key auth for webhooks.\n  // But getCurrentUser handles creation now.\n  throw new Error('createUser is deprecated. Use getCurrentUser which auto-syncs.')\n}\n\nexport async function getUserByClerkId(clerkUserId: string): Promise<User | null> {\n  // This is hard to implement without admin privileges or assuming current user.\n  // If it's current user, use getCurrentUser.\n  const { userId } = await auth()\n  if (userId === clerkUserId) {\n    return getCurrentUser()\n  }\n  throw new Error('getUserByClerkId for other users is not supported via backend yet')\n}\n\nexport async function updateUser(\n  clerkUserId: string,\n  updates: Partial<Omit<User, 'id' | 'clerk_user_id' | 'created_at' | 'updated_at'>>\n): Promise<User> {\n  // We could implement PATCH /api/users/me\n  throw new Error('updateUser not implemented via backend yet')\n}\n\nexport async function deleteUser(clerkUserId: string): Promise<void> {\n  throw new Error('deleteUser not implemented via backend yet')\n}\n"],"names":[],"mappings":";;;;;;;;;;;;AAAA;AAAA;AACA;;;AAqBO,eAAe;IACpB,MAAM,EAAE,MAAM,EAAE,GAAG,MAAM,IAAA,2LAAI;IAE7B,IAAI,CAAC,QAAQ;QACX,OAAO;IACT;IAEA,IAAI;QACF,wCAAwC;QACxC,OAAO,MAAM,iJAAe,CAAC,GAAG,CAAO;IACzC,EAAE,OAAO,OAAO;QACd,8CAA8C;QAC9C,0EAA0E;QAC1E,oEAAoE;QACpE,QAAQ,GAAG,CAAC,CAAC,6DAA6D,EAAE,OAAO;QAEnF,MAAM,YAAY,MAAM,IAAA,yMAAW;QAEnC,IAAI,CAAC,WAAW;YACd,OAAO;QACT;QAEA,4BAA4B;QAC5B,MAAM,QAAQ,UAAU,cAAc,EAAE,CAAC,EAAE,EAAE,gBAAgB,GAAG,OAAO,WAAW,CAAC;QACnF,MAAM,WAAW,GAAG,UAAU,SAAS,IAAI,GAAG,CAAC,EAAE,UAAU,QAAQ,IAAI,IAAI,CAAC,IAAI,MAAM;QAEtF,QAAQ,GAAG,CAAC,CAAC,qDAAqD,EAAE,OAAO,SAAS,EAAE,OAAO;QAE7F,IAAI;YACF,+BAA+B;YAC/B,MAAM,OAAO,MAAM,iJAAe,CAAC,IAAI,CAAO,mBAAmB;gBAC/D;gBACA,WAAW;YACb;YAEA,QAAQ,GAAG,CAAC,CAAC,6CAA6C,EAAE,KAAK,EAAE,EAAE;YACrE,OAAO;QACT,EAAE,OAAO,WAAW;YAClB,QAAQ,KAAK,CAAC,CAAC,sCAAsC,EAAE,WAAW;YAClE,OAAO;QACT;IACF;AACF;AAMO,eAAe,WAAW,KAAsB;IACrD,iFAAiF;IACjF,iEAAiE;IACjE,2CAA2C;IAC3C,MAAM,IAAI,MAAM;AAClB;AAEO,eAAe,iBAAiB,WAAmB;IACxD,+EAA+E;IAC/E,4CAA4C;IAC5C,MAAM,EAAE,MAAM,EAAE,GAAG,MAAM,IAAA,2LAAI;IAC7B,IAAI,WAAW,aAAa;QAC1B,OAAO;IACT;IACA,MAAM,IAAI,MAAM;AAClB;AAEO,eAAe,WACpB,WAAmB,EACnB,OAAkF;IAElF,yCAAyC;IACzC,MAAM,IAAI,MAAM;AAClB;AAEO,eAAe,WAAW,WAAmB;IAClD,MAAM,IAAI,MAAM;AAClB"}},
    {"offset": {"line": 261, "column": 0}, "map": {"version":3,"sources":["file:///Users/lalitshewani/projects/claude/ai_pm_roadmap/roadmap-viewer/frontend/lib/db/roadmaps.ts"],"sourcesContent":["import { serverApiClient } from '@/lib/api-client-server'\nimport { getCurrentUser } from './users'\nimport type { Roadmap } from '@/lib/types'\n\nexport interface RoadmapRecord {\n  id: string\n  user_id: string\n  title: string\n  goal: string\n  status: 'not_started' | 'in_progress' | 'completed' | 'paused' | 'archived'\n  original_roadmap: Roadmap\n  current_roadmap: Roadmap\n  customizations: any\n  version: number\n  edit_history: any[]\n  user_notes: Record<string, any>\n  start_date: string | null\n  target_end_date: string | null\n  total_duration_weeks: number\n  started_at: string | null\n  completed_at: string | null\n  created_at: string\n  updated_at: string\n  last_viewed_at: string | null\n  is_archived: boolean\n}\n\nexport interface CreateRoadmapInput {\n  roadmap: Roadmap\n  assessment: any\n  gapAnalysis: any\n  selectedSkills: string[]\n}\n\n/**\n * Creates a new roadmap for the current user\n */\nexport async function createRoadmap(input: CreateRoadmapInput): Promise<RoadmapRecord> {\n  const user = await getCurrentUser()\n  if (!user) {\n    throw new Error('User not authenticated')\n  }\n\n  return serverApiClient.post<RoadmapRecord>('/api/roadmaps/', input)\n}\n\n/**\n * Gets all roadmaps for the current user\n */\nexport async function getUserRoadmaps(): Promise<RoadmapRecord[]> {\n  const user = await getCurrentUser()\n  if (!user) {\n    throw new Error('User not authenticated')\n  }\n\n  return serverApiClient.get<RoadmapRecord[]>('/api/roadmaps/')\n}\n\n/**\n * Gets a single roadmap by ID\n */\nexport async function getRoadmapById(roadmapId: string): Promise<RoadmapRecord | null> {\n  const user = await getCurrentUser()\n  if (!user) {\n    throw new Error('User not authenticated')\n  }\n\n  try {\n    return await serverApiClient.get<RoadmapRecord>(`/api/roadmaps/${roadmapId}`)\n  } catch (error) {\n    // Handle 404 or other errors\n    console.error(`Failed to get roadmap ${roadmapId}:`, error)\n    return null\n  }\n}\n\n/**\n * Updates a roadmap\n */\nexport async function updateRoadmap(\n  roadmapId: string,\n  updates: Partial<RoadmapRecord>\n): Promise<RoadmapRecord> {\n  const user = await getCurrentUser()\n  if (!user) {\n    throw new Error('User not authenticated')\n  }\n\n  return serverApiClient.patch<RoadmapRecord>(`/api/roadmaps/${roadmapId}`, updates)\n}\n\n/**\n * Updates the current roadmap content (creates edit history entry)\n */\nexport async function updateRoadmapContent(\n  roadmapId: string,\n  newRoadmap: Roadmap,\n  editDescription: string\n): Promise<RoadmapRecord> {\n  const existing = await getRoadmapById(roadmapId)\n  if (!existing) {\n    throw new Error('Roadmap not found')\n  }\n\n  // Create edit history entry\n  const editEntry = {\n    timestamp: new Date().toISOString(),\n    version: existing.version + 1,\n    description: editDescription,\n    changes: {\n      // Could add diff here if needed\n    },\n  }\n\n  // Keep only last 50 edits\n  const newEditHistory = [...existing.edit_history, editEntry].slice(-50)\n\n  return updateRoadmap(roadmapId, {\n    current_roadmap: newRoadmap,\n    version: existing.version + 1,\n    edit_history: newEditHistory,\n  })\n}\n\n/**\n * Updates roadmap status\n */\nexport async function updateRoadmapStatus(\n  roadmapId: string,\n  status: RoadmapRecord['status']\n): Promise<RoadmapRecord> {\n  const updates: Partial<RoadmapRecord> = { status }\n\n  // Set timestamps based on status\n  if (status === 'in_progress' && !(await getRoadmapById(roadmapId))?.started_at) {\n    updates.started_at = new Date().toISOString()\n  }\n  if (status === 'completed') {\n    updates.completed_at = new Date().toISOString()\n  }\n\n  return updateRoadmap(roadmapId, updates)\n}\n\n/**\n * Archives a roadmap\n */\nexport async function archiveRoadmap(roadmapId: string): Promise<void> {\n  await updateRoadmap(roadmapId, {\n    is_archived: true,\n    status: 'archived',\n  })\n}\n\n/**\n * Deletes a roadmap permanently\n */\nexport async function deleteRoadmap(roadmapId: string): Promise<void> {\n  const user = await getCurrentUser()\n  if (!user) {\n    throw new Error('User not authenticated')\n  }\n\n  await serverApiClient.delete(`/api/roadmaps/${roadmapId}`)\n}\n\n/**\n * Gets roadmap statistics for the current user\n */\nexport async function getRoadmapStats(): Promise<{\n  total: number\n  notStarted: number\n  inProgress: number\n  completed: number\n  paused: number\n}> {\n  const user = await getCurrentUser()\n  if (!user) {\n    throw new Error('User not authenticated')\n  }\n\n  return serverApiClient.get('/api/roadmaps/stats')\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA;AACA;;;AAoCO,eAAe,cAAc,KAAyB;IAC3D,MAAM,OAAO,MAAM,IAAA,oIAAc;IACjC,IAAI,CAAC,MAAM;QACT,MAAM,IAAI,MAAM;IAClB;IAEA,OAAO,iJAAe,CAAC,IAAI,CAAgB,kBAAkB;AAC/D;AAKO,eAAe;IACpB,MAAM,OAAO,MAAM,IAAA,oIAAc;IACjC,IAAI,CAAC,MAAM;QACT,MAAM,IAAI,MAAM;IAClB;IAEA,OAAO,iJAAe,CAAC,GAAG,CAAkB;AAC9C;AAKO,eAAe,eAAe,SAAiB;IACpD,MAAM,OAAO,MAAM,IAAA,oIAAc;IACjC,IAAI,CAAC,MAAM;QACT,MAAM,IAAI,MAAM;IAClB;IAEA,IAAI;QACF,OAAO,MAAM,iJAAe,CAAC,GAAG,CAAgB,CAAC,cAAc,EAAE,WAAW;IAC9E,EAAE,OAAO,OAAO;QACd,6BAA6B;QAC7B,QAAQ,KAAK,CAAC,CAAC,sBAAsB,EAAE,UAAU,CAAC,CAAC,EAAE;QACrD,OAAO;IACT;AACF;AAKO,eAAe,cACpB,SAAiB,EACjB,OAA+B;IAE/B,MAAM,OAAO,MAAM,IAAA,oIAAc;IACjC,IAAI,CAAC,MAAM;QACT,MAAM,IAAI,MAAM;IAClB;IAEA,OAAO,iJAAe,CAAC,KAAK,CAAgB,CAAC,cAAc,EAAE,WAAW,EAAE;AAC5E;AAKO,eAAe,qBACpB,SAAiB,EACjB,UAAmB,EACnB,eAAuB;IAEvB,MAAM,WAAW,MAAM,eAAe;IACtC,IAAI,CAAC,UAAU;QACb,MAAM,IAAI,MAAM;IAClB;IAEA,4BAA4B;IAC5B,MAAM,YAAY;QAChB,WAAW,IAAI,OAAO,WAAW;QACjC,SAAS,SAAS,OAAO,GAAG;QAC5B,aAAa;QACb,SAAS;QAET;IACF;IAEA,0BAA0B;IAC1B,MAAM,iBAAiB;WAAI,SAAS,YAAY;QAAE;KAAU,CAAC,KAAK,CAAC,CAAC;IAEpE,OAAO,cAAc,WAAW;QAC9B,iBAAiB;QACjB,SAAS,SAAS,OAAO,GAAG;QAC5B,cAAc;IAChB;AACF;AAKO,eAAe,oBACpB,SAAiB,EACjB,MAA+B;IAE/B,MAAM,UAAkC;QAAE;IAAO;IAEjD,iCAAiC;IACjC,IAAI,WAAW,iBAAiB,CAAC,CAAC,MAAM,eAAe,UAAU,GAAG,YAAY;QAC9E,QAAQ,UAAU,GAAG,IAAI,OAAO,WAAW;IAC7C;IACA,IAAI,WAAW,aAAa;QAC1B,QAAQ,YAAY,GAAG,IAAI,OAAO,WAAW;IAC/C;IAEA,OAAO,cAAc,WAAW;AAClC;AAKO,eAAe,eAAe,SAAiB;IACpD,MAAM,cAAc,WAAW;QAC7B,aAAa;QACb,QAAQ;IACV;AACF;AAKO,eAAe,cAAc,SAAiB;IACnD,MAAM,OAAO,MAAM,IAAA,oIAAc;IACjC,IAAI,CAAC,MAAM;QACT,MAAM,IAAI,MAAM;IAClB;IAEA,MAAM,iJAAe,CAAC,MAAM,CAAC,CAAC,cAAc,EAAE,WAAW;AAC3D;AAKO,eAAe;IAOpB,MAAM,OAAO,MAAM,IAAA,oIAAc;IACjC,IAAI,CAAC,MAAM;QACT,MAAM,IAAI,MAAM;IAClB;IAEA,OAAO,iJAAe,CAAC,GAAG,CAAC;AAC7B"}},
    {"offset": {"line": 380, "column": 0}, "map": {"version":3,"sources":["file:///Users/lalitshewani/projects/claude/ai_pm_roadmap/roadmap-viewer/frontend/lib/db/api-keys.ts"],"sourcesContent":["import { serverApiClient } from '@/lib/api-client-server'\nimport { getCurrentUser } from './users'\n\nexport interface ApiKey {\n  id: string\n  user_id: string\n  provider: string\n  encrypted_key: string\n  is_active: boolean\n  created_at: string\n}\n\nexport type ApiProvider = 'openai' | 'anthropic' | 'google'\n\n/**\n * Saves an API key for the current user\n */\nexport async function saveApiKey(\n  apiKey: string,\n  provider: ApiProvider = 'openai'\n): Promise<ApiKey> {\n  const user = await getCurrentUser()\n  if (!user) {\n    throw new Error('User not authenticated')\n  }\n\n  // The backend returns { success: true }, not the ApiKey object currently.\n  // But the frontend might expect ApiKey. \n  // Let's check usage. If usage expects ApiKey, we might need to adjust backend or mock return.\n  // Usage in ApiKeySettings.tsx: await saveApiKey(...)\n  // It doesn't seem to use the return value much, just checks for error.\n  // But let's return a mock or adjust backend if needed.\n  // Backend: return {\"success\": True}\n\n  await serverApiClient.post('/api/users/api-keys', { apiKey, provider })\n\n  // Return a mock ApiKey to satisfy interface if needed, or change return type.\n  // For now, let's return a partial object or cast.\n  return {\n    id: 'mock-id',\n    user_id: user.id,\n    provider,\n    encrypted_key: 'hidden',\n    is_active: true,\n    created_at: new Date().toISOString()\n  }\n}\n\n/**\n * Gets the active API key for a provider\n * Returns the decrypted key\n */\nexport async function getApiKey(provider: ApiProvider = 'openai'): Promise<string | null> {\n  const user = await getCurrentUser()\n  if (!user) {\n    throw new Error('User not authenticated')\n  }\n\n  try {\n    const data = await serverApiClient.get<{ apiKey: string | null }>(`/api/users/api-keys/${provider}`)\n    return data.apiKey\n  } catch (error) {\n    return null\n  }\n}\n\n/**\n * Checks if user has an active API key for a provider\n */\nexport async function hasApiKey(provider: ApiProvider = 'openai'): Promise<boolean> {\n  const user = await getCurrentUser()\n  if (!user) {\n    return false\n  }\n\n  try {\n    const data = await serverApiClient.get<{ hasKey: boolean }>(`/api/users/has-api-key/${provider}`)\n    return data.hasKey\n  } catch (error) {\n    return false\n  }\n}\n\n/**\n * Deletes (deactivates) an API key\n */\nexport async function deleteApiKey(provider: ApiProvider = 'openai'): Promise<void> {\n  const user = await getCurrentUser()\n  if (!user) {\n    throw new Error('User not authenticated')\n  }\n\n  await serverApiClient.delete(`/api/users/api-keys?provider=${provider}`)\n}\n\n/**\n * Gets all API keys for the current user (without decryption)\n */\nexport async function getAllApiKeys(): Promise<Omit<ApiKey, 'encrypted_key'>[]> {\n  // Backend doesn't have an endpoint for this yet.\n  // But it's not critical for the main flow (Roadmap Loading).\n  // We can return empty array or implement if needed.\n  // Usage: likely in Settings page list.\n  return []\n}\n"],"names":[],"mappings":";;;;;;;;;;;;AAAA;AACA;;;AAgBO,eAAe,WACpB,MAAc,EACd,WAAwB,QAAQ;IAEhC,MAAM,OAAO,MAAM,IAAA,oIAAc;IACjC,IAAI,CAAC,MAAM;QACT,MAAM,IAAI,MAAM;IAClB;IAEA,0EAA0E;IAC1E,yCAAyC;IACzC,8FAA8F;IAC9F,qDAAqD;IACrD,uEAAuE;IACvE,uDAAuD;IACvD,oCAAoC;IAEpC,MAAM,iJAAe,CAAC,IAAI,CAAC,uBAAuB;QAAE;QAAQ;IAAS;IAErE,8EAA8E;IAC9E,kDAAkD;IAClD,OAAO;QACL,IAAI;QACJ,SAAS,KAAK,EAAE;QAChB;QACA,eAAe;QACf,WAAW;QACX,YAAY,IAAI,OAAO,WAAW;IACpC;AACF;AAMO,eAAe,UAAU,WAAwB,QAAQ;IAC9D,MAAM,OAAO,MAAM,IAAA,oIAAc;IACjC,IAAI,CAAC,MAAM;QACT,MAAM,IAAI,MAAM;IAClB;IAEA,IAAI;QACF,MAAM,OAAO,MAAM,iJAAe,CAAC,GAAG,CAA4B,CAAC,oBAAoB,EAAE,UAAU;QACnG,OAAO,KAAK,MAAM;IACpB,EAAE,OAAO,OAAO;QACd,OAAO;IACT;AACF;AAKO,eAAe,UAAU,WAAwB,QAAQ;IAC9D,MAAM,OAAO,MAAM,IAAA,oIAAc;IACjC,IAAI,CAAC,MAAM;QACT,OAAO;IACT;IAEA,IAAI;QACF,MAAM,OAAO,MAAM,iJAAe,CAAC,GAAG,CAAsB,CAAC,uBAAuB,EAAE,UAAU;QAChG,OAAO,KAAK,MAAM;IACpB,EAAE,OAAO,OAAO;QACd,OAAO;IACT;AACF;AAKO,eAAe,aAAa,WAAwB,QAAQ;IACjE,MAAM,OAAO,MAAM,IAAA,oIAAc;IACjC,IAAI,CAAC,MAAM;QACT,MAAM,IAAI,MAAM;IAClB;IAEA,MAAM,iJAAe,CAAC,MAAM,CAAC,CAAC,6BAA6B,EAAE,UAAU;AACzE;AAKO,eAAe;IACpB,iDAAiD;IACjD,6DAA6D;IAC7D,oDAAoD;IACpD,uCAAuC;IACvC,OAAO,EAAE;AACX"}},
    {"offset": {"line": 465, "column": 0}, "map": {"version":3,"sources":["file:///Users/lalitshewani/projects/claude/ai_pm_roadmap/roadmap-viewer/frontend/app/%28dashboard%29/dashboard/page.tsx"],"sourcesContent":["import Link from 'next/link'\nimport ImportRoadmap from '@/components/dashboard/ImportRoadmap'\nimport RoadmapGrid from '@/components/dashboard/RoadmapGrid'\nimport { getUserRoadmaps, getRoadmapStats } from '@/lib/db/roadmaps'\nimport { hasApiKey } from '@/lib/db/api-keys'\nimport { getCurrentUser } from '@/lib/db/users'\n\nexport default async function DashboardPage() {\n  // Load real data from database\n  const user = await getCurrentUser()\n  const hasOpenAiKey = user ? await hasApiKey('openai') : false\n  const roadmaps = user ? await getUserRoadmaps() : []\n  const stats = user ? await getRoadmapStats() : {\n    total: 0,\n    notStarted: 0,\n    inProgress: 0,\n    completed: 0,\n    paused: 0,\n    archived: 0\n  }\n\n  return (\n    <div className=\"mx-auto max-w-7xl px-4 py-6 sm:px-6 lg:px-8\">\n      {/* Compact Header with Inline Stats */}\n      <div className=\"mb-8 flex items-center justify-between flex-wrap gap-4\">\n        <div>\n          <h1 className=\"text-2xl font-bold text-text-primary font-primary\">\n            My Roadmaps\n          </h1>\n          {stats.total > 0 && (\n            <div className=\"flex items-center gap-4 mt-2 text-sm text-text-secondary\">\n              <span className=\"flex items-center gap-1\">\n                <span className=\"font-semibold text-text-primary\">{stats.total}</span> total\n              </span>\n              <span className=\"text-border\">•</span>\n              <span className=\"flex items-center gap-1\">\n                <span className=\"font-semibold text-primary\">{stats.inProgress}</span> in progress\n              </span>\n              <span className=\"text-border\">•</span>\n              <span className=\"flex items-center gap-1\">\n                <span className=\"font-semibold text-green-600 dark:text-green-400\">{stats.completed}</span> completed\n              </span>\n            </div>\n          )}\n        </div>\n        <div className=\"flex items-center gap-3\">\n          <Link\n            href=\"/onboarding\"\n            className={`inline-flex items-center gap-2 px-5 py-2.5 bg-primary text-on-primary rounded-lg hover:bg-primary-hover transition-colors font-medium shadow-sm glow-accent ${!hasOpenAiKey ? 'opacity-50 pointer-events-none' : ''\n              }`}\n          >\n            <svg className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" strokeWidth=\"2\" stroke=\"currentColor\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M12 4.5v15m7.5-7.5h-15\" />\n            </svg>\n            New Roadmap\n          </Link>\n        </div>\n      </div>\n\n      {/* API Key Warning - Conditional Banner */}\n      {!hasOpenAiKey && (\n        <div className=\"mb-6 p-4 bg-yellow-500/10 border border-yellow-500/20 rounded-lg flex items-start gap-3\">\n          <svg\n            className=\"h-5 w-5 text-yellow-600 dark:text-yellow-400 flex-shrink-0 mt-0.5\"\n            fill=\"none\"\n            viewBox=\"0 0 24 24\"\n            strokeWidth=\"1.5\"\n            stroke=\"currentColor\"\n          >\n            <path\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              d=\"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z\"\n            />\n          </svg>\n          <div className=\"flex-1\">\n            <h3 className=\"text-sm font-semibold text-yellow-800 dark:text-yellow-200\">\n              API Key Required\n            </h3>\n            <p className=\"mt-1 text-sm text-yellow-700 dark:text-yellow-300\">\n              Add your OpenAI API key to create new roadmaps.\n            </p>\n            <Link\n              href=\"/settings\"\n              className=\"inline-flex items-center mt-2 text-sm font-medium text-yellow-600 hover:text-yellow-700 dark:text-yellow-400 dark:hover:text-yellow-300 underline\"\n            >\n              Go to Settings →\n            </Link>\n          </div>\n        </div>\n      )}\n\n      {/* Primary Content: My Roadmaps */}\n      {roadmaps.length === 0 ? (\n        /* Empty State */\n        <div className=\"rounded-lg border-2 border-dashed border-border p-12 text-center\">\n          <svg\n            className=\"mx-auto h-12 w-12 text-text-secondary\"\n            fill=\"none\"\n            viewBox=\"0 0 24 24\"\n            strokeWidth=\"1.5\"\n            stroke=\"currentColor\"\n          >\n            <path\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              d=\"M9 6.75V15m6-6v8.25m.503 3.498l4.875-2.437c.381-.19.622-.58.622-1.006V4.82c0-.836-.88-1.38-1.628-1.006l-3.869 1.934c-.317.159-.69.159-1.006 0L9.503 3.252a1.125 1.125 0 00-1.006 0L3.622 5.689C3.24 5.88 3 6.27 3 6.695V19.18c0 .836.88 1.38 1.628 1.006l3.869-1.934c.317-.159.69.159 1.006 0l4.994 2.497c.317.158.69.158 1.006 0z\"\n            />\n          </svg>\n          <h3 className=\"mt-4 text-lg font-semibold text-text-primary font-primary\">No roadmaps yet</h3>\n          <p className=\"mt-2 text-sm text-text-secondary font-secondary mb-6\">\n            Get started by creating your first personalized learning roadmap\n          </p>\n          <Link\n            href=\"/onboarding\"\n            className={`inline-flex items-center gap-2 px-6 py-3 bg-primary text-on-primary font-medium rounded-lg hover:bg-primary-hover transition-colors shadow-sm glow-accent ${!hasOpenAiKey ? 'opacity-50 pointer-events-none' : ''\n              }`}\n          >\n            <svg className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" strokeWidth=\"2\" stroke=\"currentColor\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M12 4.5v15m7.5-7.5h-15\" />\n            </svg>\n            Create Your First Roadmap\n          </Link>\n        </div>\n      ) : (\n        <RoadmapGrid roadmaps={roadmaps} />\n      )}\n\n      {/* Quick Actions - Compact Secondary Section */}\n      <div className=\"mt-12 pt-8 border-t border-border\">\n        <h2 className=\"text-lg font-semibold text-text-primary font-primary mb-4\">Quick Actions</h2>\n        <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-3\">\n          {/* Import Roadmap */}\n          <ImportRoadmap />\n\n          {/* Settings */}\n          <Link\n            href=\"/settings\"\n            className=\"group relative overflow-hidden rounded-lg border border-border p-5 transition-all hover:border-primary hover:bg-primary/5 flex items-center gap-4\"\n          >\n            <div className=\"flex h-10 w-10 items-center justify-center rounded-lg bg-surface shadow-sm\">\n              <svg\n                className=\"h-5 w-5 text-text-secondary group-hover:text-primary transition-colors\"\n                fill=\"none\"\n                viewBox=\"0 0 24 24\"\n                strokeWidth=\"2\"\n                stroke=\"currentColor\"\n              >\n                <path\n                  strokeLinecap=\"round\"\n                  strokeLinejoin=\"round\"\n                  d=\"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.431.992a6.759 6.759 0 010 .255c-.007.378.138.75.43.99l1.005.828c.424.35.534.954.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 01-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.369-.49l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.932 6.932 0 010-.255c.007-.378-.138-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z\"\n                />\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\" />\n              </svg>\n            </div>\n            <div className=\"flex-1 text-left\">\n              <h3 className=\"text-sm font-semibold text-text-primary group-hover:text-primary font-primary transition-colors\">\n                Settings\n              </h3>\n              <p className=\"text-xs text-text-secondary font-secondary\">\n                Manage API keys\n              </p>\n            </div>\n          </Link>\n        </div>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}}]
}